---
outline: [2,4]
prev:
  text: '第 7 章 响应式设计'
  link: '/modern-css-with-tailwind/ch07'
next:
  text: 'Tailwind 现代 CSS 样式 (第二版)'
  link: '/modern-css-with-tailwind/'
---

# 第 8 章 自定义 Tailwind

在本书中，我多次提到 Tailwind 是可以自定义的，本章将详细说明如何以及为什么要进行自定义。
Tailwind 是一个根据你代码中的模式生成大量 CSS 类的引擎，这个引擎提供了很多钩子（hooks），让我们可以修改可用的工具类集合。

你可能想自定义 Tailwind，有几个常见原因：

* **修改默认值**
  Tailwind 为大多数工具类提供了默认的步进值，例如 margin、padding 以及其他间距类，还有响应式断点的默认屏幕尺寸。
  Tailwind 也提供了一套默认颜色，但你可能希望添加自己的颜色。
  在配置文件中可以修改这些默认值。
  虽然你可以在需要的地方使用任意值，但如果把常用的一些值设为默认，会更方便管理，也更省事。

* **修改生成的类集合**
  Tailwind 会生成大量 CSS 类。即便它是根据你的代码生成的，你仍然可能希望显式禁止某些类生成，或者确保其他类被生成。

* **添加新功能**
  虽然你可以在普通 CSS 中自己写扩展，但你也可以通过 Tailwind 配置添加插件，这样更方便共享和与 Tailwind 其他行为整合。

* **与已有 CSS 集成**
  如果你在一个已有大量 CSS 的网站上开始使用 Tailwind，Tailwind 提供了配置选项，保证其工具类不会与现有 CSS 或 HTML 模板工具冲突。

接下来，我们来看如何根据自己的需求自定义 Tailwind，从配置文件开始。


## 配置文件基础

Tailwind 的配置文件是可选生成的，在安装 Tailwind 时可以创建。
你也可以在安装 Tailwind npm 包后随时用命令生成它：

```bash
npx tailwindcss init
```

生成的最小配置文件如下：

```js
module.exports = {
  content: [],
  theme: {
    extend: {},
  },
  plugins: [],
}
```

如果你希望得到包含完整默认配置的文件，可以用：

```bash
npx tailwindcss init --full
```

大多数自定义内容都会放在 `theme` 部分。

Tailwind 将每类工具视为核心插件（core plugin），
可以在 Tailwind 文档中查看完整列表。
`theme` 对象会引用这些核心插件的名称，让你可以自定义核心插件，大多数核心插件都提供了可自定义的选项。

## 修改默认值

在配置文件中，`theme` 对象的 **键** 是每个核心插件的名称，
**值** 是该插件的配置选项。

有三个特殊配置选项：`screens`、`colors` 和 `spacing`，
它们本身不是核心插件，但作为许多其他核心插件配置的基础。

需要注意的是，Tailwind 中的 “theme” 用法与其他地方可能不同：

* 其他地方的 “theme” 通常指一套颜色方案，比如“深色主题”或“浅色主题”。
* 在 Tailwind 中，`theme` 指整个默认配置集合，而且只有一套。
* 如果想切换颜色方案，需要使用 CSS 变量或 `dark:` 修饰符来指定暗模式下的行为。
* 可以在 GitHub 上查看完整的默认 `theme`（在 Tailwind 主分支，可能比已发布版本稍新）。

你可以通过两种方式自定义 `theme`：

1. **覆盖整个选项（override）**
2. **扩展选项（extend）**

要**覆盖**默认值，你可以在 `theme` 对象中为整个选项（核心插件或特殊值）提供一套新的值。
例如，下面覆盖了整个屏幕断点集合：

```js
theme: {
  screens: {
    phone: '640px',
    landscape: '768px',
    tablet: '1024px',
    laptop: '1280px',
  }
}
```

这种方式会**完全替换**默认值。

如果你希望保留默认值，同时在此基础上添加新的值，可以使用 `theme.extend`。
例如，在默认断点之外添加一个超大屏幕断点：

```js
theme: {
  extend: {
    screens: {
      '3xl': '2440px',
    }
  }
}
```

### 屏幕宽度

`theme.screens` 对象用于生成响应式修饰符的断点。
默认配置如下：

```js
module.exports = {
  theme: {
    screens: {
      'sm': '640px',
      'md': '768px',
      'lg': '1024px',
      'xl': '1280px',
      '2xl': '1536px',
    }
  }
}
```

你可以以多种方式修改这些值，但需要注意：

* 如果你修改 `screens`，必须提供完整的尺寸范围（覆盖所有默认断点）。
* 如果只想添加一个新断点，应使用 `extend`：

```js
module.exports = {
  theme: {
    extend: {
      screens: {
        '3xl': '2440px',
      }
    }
  }
}
```

这些断点是合理的默认值，但你也可以调整具体数值。
此外，你还可以修改键名，例如改成 `phone`、`landscape`、`tablet` 和 `desktop`。
这些键名会成为新的修饰符名称，比如不再写 `sm:m-0`，而写 `phone:m-0`。

屏幕宽度的高级配置

1. **字符串值作为 min-width**
   如果你给断点键的值是字符串，Tailwind 会将其视为该断点的最小宽度（min-width）来生成 CSS。

2. **对象形式指定 min 和 max**
   你也可以传一个对象 `{min, max}` 来指定断点范围。

   * 仅指定 `max` 时，响应式行为会反转：未加修饰符的工具类应用于最大屏幕，修饰符在屏幕变小的时候生效。

```js
module.exports = {
  theme: {
    screens: {
      '2xl': { max: '9999px' },
      'xl':  { max: '1535px' },
      'lg':  { max: '1023px' },
      'md':  { max: '767px' },
      'sm':  { max: '639px' },
    }
  }
}
```

3. **指定 min 和 max**
   给对象加上 `min` 值，可以将每个断点限制在一个特定范围内，这时你需要在每个断点完整指定所有属性。

4. **基于其他条件的媒体查询**
   媒体查询不仅可以基于屏幕尺寸，还可以基于其他条件。
   使用 `raw` 选项可以添加自定义条件，例如打印模式：

```js
module.exports = {
  theme: {
    extend: {
      screens: { 'print': { raw: 'print' } },
    }
  }
}
```

然后就可以像使用其他屏幕断点一样使用它：

```html
class="print:bg-white"
```
